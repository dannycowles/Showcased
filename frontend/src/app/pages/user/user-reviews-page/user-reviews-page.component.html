<div class="container text-white pt-5" style="margin-bottom: 15vh">
  <a class="d-inline-flex align-items-center gap-3 mb-5 text-decoration-none text-reset return-section" [routerLink]="['..']">
    <img class="return-arrow" ngSrc="chevron-left.svg" alt="" height="40" width="40">
    <h3 class="return-title">Back to profile</h3>
  </a>

  <div id="select-header" class="d-flex align-items-center mb-5">
    <h1 id="page-title" class="fw-bold">{{username}}'s reviews</h1>
    <div id="page-header" class="d-flex ms-auto gap-5">
      <div class="dropdown d-flex align-items-center gap-3">
        <h4 class="text-reset select-option">Filter</h4>
        <button id="filter-dropdown" class="btn btn-secondary fs-5 d-flex align-items-center gap-3" type="button" data-bs-toggle="dropdown" aria-expanded="false">
          <span>{{ selectedReviewType.label }}</span>
          <img ngSrc="chevron-down.svg" alt="" height="20" width="20">
        </button>
        <ul class="dropdown-menu">
          @for (reviewType of reviewTypeOptions; track reviewType.value) {
            <li><a class="dropdown-item" (click)="setReviewType(reviewType)">{{reviewType.label}}</a></li>
          }
        </ul>
      </div>

      <div class="dropdown d-flex align-items-center gap-3">
        <h4 class="text-reset select-option">Sort</h4>
        <button id="sort-dropdown" class="btn btn-secondary fs-5 d-flex align-items-center gap-3" type="button" data-bs-toggle="dropdown" aria-expanded="false">
          <span>{{ selectedSortOption.label }}</span>
          <img ngSrc="chevron-down.svg" alt="" height="20" width="20">
        </button>
        <ul class="dropdown-menu">
          @for (sortOption of sortReviewOptions; track sortOption.value) {
            <li><a class="dropdown-item" (click)="setSortOption(sortOption)">{{sortOption.label}}</a></li>
          }
        </ul>
      </div>
    </div>
  </div>

  @if (isLoadingReviews) {
    <div class="d-flex justify-content-center mt-3">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  } @else if (reviews?.content?.length != 0) {
    <div class="reviews"
         infiniteScroll
         [infiniteScrollDistance]="1"
         (scrolled)="loadMoreReviews()">
      @for (review of reviews.content; track review.id + '-' + review.type) {
        <app-profile-review [review]="review"></app-profile-review>
        <hr>
      }
    </div>
  } @else {
    <h3>No reviews yet</h3>
  }
</div>
