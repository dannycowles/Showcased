<div class="container text-white pt-5" style="margin-bottom: 15vh">
  <a class="d-inline-flex align-items-center gap-3 mb-5 text-decoration-none text-reset return-section" [routerLink]="['..']">
    <img class="return-arrow" ngSrc="chevron-left.svg" alt="" height="40" width="40">
    <h3 class="return-title">Back to collection</h3>
  </a>

  <h1 id="page-title" class="fw-bold mb-5">Edit collection</h1>

  <form [formGroup]="editCollectionForm" (ngSubmit)="saveEdits()">
    <div class="mb-3">
      <label for="collectionName" class="form-label">Name <span class="required-label">(Required)</span></label>
      <input type="text"
             class="form-control clear"
             formControlName="collectionName"
             id="collectionName"
             placeholder="Enter name"
             aria-describedby="nameHelpBlock"
             [minLength]="minNameLength"
             [maxLength]="maxNameLength">
      <div id="nameHelpBlock" class="form-text text-reset">
        <div>Must be between {{minNameLength}} and {{maxNameLength}} characters.</div>
        <div>{{maxNameLength - editCollectionForm.get("collectionName").value.length}} characters remaining.</div>
      </div>
    </div>

    <div class="mb-3">
      <label for="collectionDescription" class="form-label">Description</label>
      <textarea class="form-control clear"
                formControlName="description"
                id="collectionDescription"
                [maxLength]="maxDescriptionLength"
                rows="5"
      ></textarea>
      <div id="descriptionHelpBlock" class="form-text text-reset">
        {{maxDescriptionLength - editCollectionForm.get("description")?.value?.length}} characters remaining.
      </div>
    </div>

    <div class="dropdown mb-4">
      <label for="visibility-dropdown" class="form-label">Visibility</label>
      <button id="visibility-dropdown" class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        {{ selectedVisibility }}
        <img ngSrc="chevron-down.svg" alt="" height="20" width="20">
      </button>
      <ul class="dropdown-menu">
        <li><a class="dropdown-item" (click)="setVisibility(false)">Public - Anyone can view</a></li>
        <li><a class="dropdown-item" (click)="setVisibility(true)">Private - Only you can view</a></li>
      </ul>
    </div>

    <div class="form-check mb-5">
      <input class="form-check-input" type="checkbox" id="collectionRanked" formControlName="isRanked">
      <label class="form-check-label" for="collectionRanked">Ranked Collection</label>
    </div>

    <div class="mb-4" [ngClass]="editSuccess ? 'validation-success' : 'validation-error'">{{editMessage}}</div>

    <div class="d-flex flex-wrap justify-content-end gap-3">
      <button id="cancel-button" type="button" class="btn btn-secondary custom-button" [routerLink]="['../']">Cancel</button>
      <button id="save-button" type="submit" [disabled]="isSaveDisabled()" class="btn btn-primary custom-button">Save changes</button>
      <button id="delete-button" type="button" class="btn btn-primary d-flex align-items-center justify-content-center gap-3 custom-button" (click)="deleteCollection()">
        <img ngSrc="trash.svg" alt="" width="20" height="20">
        <span>Delete</span>
      </button>
    </div>
  </form>
</div>
