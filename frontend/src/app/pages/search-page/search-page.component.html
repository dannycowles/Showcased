<div class="container text-white d-flex align-items-start gap-5">
  <div class="d-flex flex-column gap-3 flex-shrink-0" style="width: 200px; padding-top: 95px">
    <button type="button" class="btn btn-primary w-100 search-option" [ngClass]="{'selected': showsSelected}" (click)="selectShows()">
      <img ngSrc="tv.svg" alt="Shows icon" height="20" width="20">
      <span>Shows</span>
    </button>
    <button type="button" class="btn btn-primary w-100 search-option" [ngClass]="{'selected': !showsSelected}" (click)="selectUsers()">
      <img ngSrc="people.svg" alt="Users icon" height="20" width="20">
      <span>Users</span>
    </button>
  </div>

  <div class="flex-grow-1">
    <h1 class="mb-3">Search</h1>
    <div class="position-relative mb-4">
      <img class="input-icon" ngSrc="search.svg" alt="Search icon" width="20" height="20">
      <input class="form-control" id="search-input" [(ngModel)]="searchString" placeholder="Search" autofocus (input)="debouncedSearch()">
    </div>
    @if (isLoading) {
      <div class="spinner-border mt-3" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    } @else if (showsSelected && showResults?.results?.length) {
      @for (show of showResults.results; track show.id) {
        <div class="d-flex gap-3">
          <!-- Poster images are sized w185, using 2:3 ratio -->
          <a [routerLink]="['/show', show.id]"><img [ngSrc]="show.posterPath" class="poster-image" alt="Poster Image" priority width="185" height="278"></a>
          <div>
            <div class="d-flex align-items-center gap-4">
              <a class="text-decoration-none text-reset" [routerLink]="['/show', show.id]">
                <h2 class="fw-bold">{{show.title}}</h2>
              </a>
              <h5>({{showYears(show)}})</h5>
            </div>
            <p>{{show.genreList}}</p>
            <p>{{show.overview}}</p>
          </div>
        </div>
        <hr>
      }
    } @else if (!showsSelected && userResults?.length) {
      @for (user of userResults; track user.id) {
        <div class="d-flex align-items-center gap-5">
          <a [routerLink]="['/user', user.displayName]">
            <img class="profile-picture" [ngSrc]="user.profilePicture" alt="User profile picture" width="100" height="100">
          </a>
          <a class="text-decoration-none text-reset" [routerLink]="['/user', user.displayName]">
            <h3 class="fw-bold username">{{user.displayName}}</h3>
          </a>
        </div>
        <hr>
      }
    } @else if (hasSearched && searchString.trim().length > 0) {
      <div class="mt-3 fs-4">No results found!</div>
    }
  </div>
</div>
